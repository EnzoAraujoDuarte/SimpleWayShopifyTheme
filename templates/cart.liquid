<div class="cart-container container py-10">
  {% if cart.item_count > 0 %}
    <h1 class="text-3xl font-bold mb-8">Your Cart</h1>

    <form action="/cart" method="post" novalidate>
      <table class="w-full">
        <thead>
          <tr class="border-b">
            <th class="text-left py-4">Product</th>
            <th class="text-center py-4">Quantity</th>
            <th class="text-right py-4">Total</th>
          </tr>
        </thead>
        <tbody>
          {% for item in cart.items %}
            <tr class="border-b">
              <td class="py-4">
                <div class="flex items-center">
                  <img
                    src="{{ item.image | img_url: '120x' }}"
                    alt="{{ item.title | escape }}"
                    class="w-20 h-20 object-cover mr-4">
                  <div>
                    <h3 class="font-medium">{{ item.product.title }}</h3>
                    {% unless item.product.has_only_default_variant %}
                      <p class="text-sm text-gray-600">
                        {% for option in item.options_with_values %}
                          {{ option.name }}: {{ option.value }}{% unless forloop.last %}, {% endunless %}
                        {% endfor %}
                      </p>
                    {% endunless %}
                    <p class="text-sm text-gray-600">{{ item.price | money }}</p>
                    {% if item.properties %}
                        {% for property in item.properties %}
                        {% unless property.first contains '_' %}
                            <div>{{ property.first }}: {{ property.last }}</div>
                        {% endunless %}
                        {% endfor %}
                    {% endif %}
                  </div>
                </div>
              </td>
              <td class="text-center">
                <input
                  type="number"
                  name="updates[]"
                  value="{{ item.quantity }}"
                  min="0"
                  class="w-16 text-center border rounded py-1">
              </td>
              <td class="text-right">
                {{ item.final_line_price | money }}
              </td>
            </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr>
            <td colspan="2" class="text-right py-4">
              <span class="font-medium">Subtotal:</span>
            </td>
            <td class="text-right py-4">
              <span class="font-medium">{{ cart.total_price | money }}</span>
            </td>
          </tr>
        </tfoot>
      </table>

      <div class="flex justify-between items-center mt-8">
        <a href="/collections/all" class="text-gray-600 hover:text-black">
          Continue Shopping
        </a>
        <div class="flex gap-4">
          <button
            type="submit"
            name="update"
            class="bg-gray-200 text-gray-800 py-2 px-6 rounded hover:bg-gray-300 transition">
            Update Cart
          </button>
          <button
            type="submit"
            name="checkout"
            class="bg-black text-white py-2 px-6 rounded hover:bg-gray-800 transition">
            Checkout
          </button>
        </div>
      </div>
    </form>

  {% else %}
    <div class="text-center py-20">
      <h2 class="text-2xl font-medium mb-4">Your cart is empty</h2>
      <a
        href="/collections/all"
        class="inline-block bg-black text-white py-2 px-6 rounded hover:bg-gray-800 transition">
        Continue Shopping
      </a>
    </div>
  {% endif %}
</div>
